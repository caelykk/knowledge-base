
`revert` из предыдущего раздела является мощной командой, которая позволяет отменить любые коммиты в репозиторий. Однако, и оригинальный и «отмененный» коммиты видны в истории ветки (при использовании команды `git log`).

#### Команда `reset`

Если выполнить команду `reset` с указанием **ссылки на коммит** (т.е. *метки `HEAD`*, *имени ветки* или *тега*, *хеша коммита*), то команда...
1. Изменит текущую ветку, чтобы она указывала на указанный коммит.
2. Опционально сбросит область подготовки до соответствия с указанным коммитом.
3. Опционально сбросит рабочую директорию до соответствия с указанным коммитом.

#### Для начала отметьте эту ветку

Прежде чем удалить коммиты, давайте отметим последний коммит тегом, чтобы потом можно было его найти.

```
git tag oops
```

#### Сброс к коммиту, предшествующему `oops`

Глядя на историю лога (см. выше), мы видим, что коммит с тегом `v1` является коммитом, предшествующим ошибочному коммиту.

Поскольку ветка имеет тег, мы можем использовать имя тега в команде сброса `reset` (если она не имеет тега, мы можем использовать хеш коммита).

```
git reset --hard v1
git log
```

Наша ветка `main` теперь указывает на коммит `v1`, а коммитов "Revert Oops" и "Oops" в ветке уже нет. Параметр `--hard` указывает, что рабочая директория должна быть приведена к тому состоянию, которое соответствует `HEAD`-коммиту ветки.

#### Ничего никогда не теряется

Что же случается с ошибочными коммитами? Оказывается, что коммиты все еще находятся в репозитории. На самом деле, мы все еще можем на них ссылаться. Помните, в начале этого урока мы создали для отмененного коммита тег `oops`? Давайте посмотрим на _все_ коммиты.

```
git log --all
```

Мы видим, что ошибочные коммиты не исчезли. Они все еще находятся в репозитории. Просто они отсутствуют в ветке `main`. Если бы мы не отметили их тегами, они по-прежнему находились бы в репозитории, но не было бы никакой возможности ссылаться на них, кроме как при помощи хешей этих коммитов. 

```
Коммиты, на которые нет ссылок, остаются в репозитории до тех пор, пока не будет запущен сборщик мусора.
```

#### Опасность сброса

Сброс в локальных ветках, как правило, безопасен. Последствия любой «аварии» как правило, можно восстановить простым сбросом с помощью нужного коммита.

Однако, если ветка уже стала общедоступной на удаленных репозиториях, сброс может сбить с толку других пользователей ветки.